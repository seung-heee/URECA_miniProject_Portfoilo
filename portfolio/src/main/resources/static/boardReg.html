<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>프로젝트</title>
</head>
<body>
  <h1>프로젝트 등록</h1>
  <div>
    <div><a href="board.html">게시물 목록</a></div>

    <form action="/board/regist" id="bd_form" enctype="multipart/form-data">
      <label for="bd_title">프로젝트명</label>
      <input type="text" id="bd_title" name="title" required="required"> <br/>

      <label for="bd_content">프로젝트 설명</label>
      <input type="text" id="bd_content" name="content" required="required"> <br/>

      <label for="bd_image">프로젝트 이미지</label>
      <input type="file" id="bd_image" name="image" required="required"><br/>
      
      <input type="submit" value="프로젝트 등록">
    </form>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script type="text/javascript">
    $("#bd_form").submit(function(event){
      event.preventDefault(); // 기본 폼 제출 동작 막기
      
      var formData = new FormData(this);
      
      $.ajax({
        url: "/board/regist",
        type: "POST",
        data: formData,
        contentType: false, // FormData 사용 시 false로 설정
        processData: false, // FormData 사용 시 false로 설정
        success: function(data){
          if(data.code == "ok"){
            location.href = "board.html";
          }
        }
      });
    });
  </script>
</body>
</html>
